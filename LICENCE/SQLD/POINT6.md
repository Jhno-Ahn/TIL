### POINT6: 식별자

> 정의
> 

식별자는 ‘엔터니 내에서 인스턴스들을 구분하는 구분자로, 엔터니를 대표하는 속성’이다. 따라서 하나의 엔터티에는 반드시 하나의 유일한 식별자가 존재한다.

> 특징
> 

<img width="752" alt="스크린샷 2022-01-28 오후 4 56 06" src="https://user-images.githubusercontent.com/81155572/151508748-96b87893-4cfc-4d2a-8048-279746b9b0c9.png">


대체식별자의 특징은 주식별자의 특징과 일치하지만, 외부식별자의 경우 주식별자 특징과 일치하지 않으며 참조무결성 제약조건(Referential Integrity)에 따른 특징을 가지고 있다.

> 주식별자의 특징과 키의 종류
> 
- 주식별자는 유일성과 최소성(Not Null)을 만족하는 키로, 엔터티를 대표할 수 있어야 한다.
- 자주 변경되지 않아야 하며 엔터티의 인스턴스를 유일하게 식별한다.

| 데이터베이스 키 | 설명 |
| --- | --- |
| 기본키PK | 후보키 중 엔터티를 대표할 수 있는 키 |
| 후보키Candidate Key | 유일성과 최소성(Not Null)을 만족하는 키 |
| 수퍼키Super Key | 유일성은 만족하지만 최소성(Not Nul)은 만족하지 않는 키 |
| 대체키Alternate Key | 여러 개의 후보키 중 기본키를 선정하고 남은 키 |

> 식별자의 분류
> 

<img width="748" alt="스크린샷 2022-01-28 오후 4 56 26" src="https://user-images.githubusercontent.com/81155572/151508801-0455046a-4ce5-49fc-8855-3ad164162856.png">


1. 대표성 여부에 따른 식별자 종류

| 종류 | 설명 |
| --- | --- |
| 주식별자 PK | 유일성, 최소성, 대표성을 만족한다. 다른 엔터티와 참조관계로 연결될 수 있다. |
| 보조식별자 | 유일성, 최소성은 만족하지만 대표성을 만족하지 못해 참조관계를 연결하지 못한다. |
2. 스스로 생성 여부에 따른 식별자 종류

| 종류 | 설명 |
| --- | --- |
| 내부식별자 | 엔터티 내부에서 스스로 만들어지는 식별자 |
| 외부식별자 | 다른 엔터티와의 관계로 인해 만들어지는 식별자 |
3. 속성의 수에 따른 식별자 종류

| 종류 | 설명 |
| --- | --- |
| 단일식별자 | 하나의 속성으로 구성되는 식별자 |
| 복합식별자 | 두 개 이상의 속성으로 구성되는 식별자 |
4. 대체 여부에 따른 식별자 종류

| 종류 | 설명 |
| --- | --- |
| 본질식별자 | 업무에 의해 만들어지는 식별자 |
| 인조식별자 | 최대한 범용적인 값을 사용하고 유일한 값을 만들기 위해 인위적으로 만들어지는 식별자 주민등록번호, 사원번호, 부서코드 등 |

> 주식별자 도출기준
> 
1. 해당 업무에서 자주 이용되는 속성을 PK로 지정한다.
2. 명칭, 내역 등과 같이 이름으로 기술된다면 가능하면 PK로 지정하지 않는다. 특히 ‘이름'은 최악(동명이인)
3. 복합으로 주식별자를 구성할 경우 너무 많은 속성이 포함되지 않도록 새로운 인조식별자를 생성한다.

> 식별자관계와 비식별자관계( + 강한 객체와 약한 객체)
> 

엔터티 사이 관계 유형은 업무 특징, 자식 엔터티의 주식별자 구성, SQL 전략 등에 의해 결정된다.

<img width="802" alt="스크린샷 2022-01-28 오후 4 56 45" src="https://user-images.githubusercontent.com/81155572/151508847-f1d9a92b-17d0-4d18-b0aa-f2e26f866b3f.png">


1. 식별자 관계 Idenrifying Relationship
- 부모 식별자를 자식 엔터티의 PK로 이용하는 경우에 NULL값이 오면 안되니, 반드시 부모 엔터티가 생성되어야 자기 자신의 엔터티(자식 엔터티) 가 생성되는 경우다.
- 부모한테 받은 속성을 자식 엔터티가 모두 사용하고 그것만을 PK로 사용한다면 부모-자식 관계는 1:1 관계다.
- 부모로부터 받은 속성을 포함하고 다른 부모에게 받은 속성을 포함하거나 스스로 가진 속성과 함께 PK로 지정한다면 1:M 관계가 된다.
- 이 때 식별자를 공유한 부모 엔터티를 ‘강한 개체String Entity’, 공유 받은 자식 엔터티를 ‘약한 개체’Weak Entity’라고 한다.
2. 비식별자관계 Non-Identifying Relationship
    
<img width="794" alt="스크린샷 2022-01-28 오후 4 57 04" src="https://user-images.githubusercontent.com/81155572/151508898-ae38bb2a-326b-4463-9058-017cb044c86e.png">

    
- 부모 엔터티로부터 속성을 받았지만 자식 엔터티의 PK로 사용하지는 않고, 일반 속성으로만 사용하는 경우이다.
- 강한 개체의 기본키를 다른 엔터티의 기본키가 아닌 일반 칼럼의 관계로 가지는 것이다.

> 식별자 관계로만 설정할 때의 문제점
> 

조인에 참여하는 주식별자 속성의 수가 많을 경우 정확하게 조인관계를 설정한지 않고 즉, 누락하여 개발하는 경우가 생길 수도 있다.

식별자 관계만으로 연결된 데이터 모델ㅇ은 주식별자 속성이 지속적으로 증가할 수 밖에 없는 구조로서 개발자 복잡성과 오류 가능성을 유발시킬 수 있는 요인이 될 수 있다는 것이다.

> 비식별자 관계로만 설정할 때의 문제점
> 

일반적으로 각각의 엔터티에는 중요한 기준속성이 있는데 이러한 기준속성은 부모엔터티의 PK속성으로부터 상속되어 자식엔터티에 존재하는 경우가 많다. 이러한 속성의 예로 ‘주민등록번호', ‘사원번호', ‘주문번호', ‘목록번호’ 등이 있다.

이런 속성은 부모 엔터티를 조회할 때도 당연히 쓰이지만 자식엔터티의 데이터를 조회할 때 해당 조건이 조회의 조건으로 걸리는 경우가 다수이다.

그런데 데이터 모델링을 전개할 때 각 엔터티 간의 관계를 비식별자 관계로 설정하면 이런 유형의 속성이 자식엔터티로 상속이 되지 않아 자식엔터티에서 데이터를 처리할 때 쓸데 없이 부모엔터티까지 찾아가야 하는 경우가 발생된다.
