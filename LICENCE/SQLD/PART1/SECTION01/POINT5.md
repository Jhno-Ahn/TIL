### POINT5 : 관계

> 정의
> 

관계는 ‘엔터티 간의 관련성을 의미’한다. 이 관계에서 튜플의 전체 개수를 카디널리티(Cardinality)라고 한다.

> 분류
> 

관계는 연결할 때 어떤 목적으로 연결되었느냐에 따라 존재에 의한 관계/행위에 의한 관계로 구분된다.

<img width="477" alt="스크린샷 2022-01-24 오후 1 00 27" src="https://user-images.githubusercontent.com/81155572/150719966-cc9981cf-69c9-475f-be94-d746c7b30572.png">


1. 존재 관계
- 엔터티 간의 상태를 의미한다
- ‘소속된다’라는 의미는 행위에 의해 발생되는 의미가 아니라 황경빈 사원이 DB팀에 소속되어 있기 때문에, 즉 존재에 의해 형성된 의미이다.
- UML 클래스 다이어크램의 관계 중 연관관계이며 실선으로 표현한다.(ERD에서는 표기 구분X)
2. 행위 관계
- 엔터티 간에 어떤 행위가 있는 것
- 계좌를 개설하고 이를 통해 주문을 발주하는 것처럼 행위에 의해 관계가 형성된다. 위의 예를 보면 ‘주문한다'는 행위를 통해 CTA201이라는 주문번호가 생성되었으므로 이는 행위에 의한 관계이다.
- UML 클래스 다이어그램의 관계 중 의존관계이며 점선으로 표현한다.(ERD에서는 표기 구분X)

> 관계의 표기법
> 
- 관계명: 관계의 이름
- 관계차수: 1:1, 1:M, M:N
- 관계선택사양: 필수관계, 선택관계

> 관계차수
> 

관계차수는 두 엔터티 관계에서의 참여자 수다.

1. 1:1 관계
    
<img width="455" alt="스크린샷 2022-01-24 오후 1 00 45" src="https://user-images.githubusercontent.com/81155572/150719998-b276906e-14eb-4d6b-be4e-7257770f58d8.png">

    
    관계의 참여하는 각각의 엔터티는 관계를 맺는 다른 엔터티에 대해 딱 하나의 관계만 가진다.
    
    | 종류 | 설명 |
    | --- | --- |
    | 완전 1:1 관계 | 한 엔터티에 관계되는 엔터티가 하나만 있는 경우로, 반드시 존재한다. |
    | 선택적 1:1 관계 | 한 엔터티에 관계되는 엔터티가 하나거나 없을 수 있다. |
2. 1:M 관계
    
<img width="470" alt="스크린샷 2022-01-24 오후 1 00 59" src="https://user-images.githubusercontent.com/81155572/150720016-7962795b-81aa-4b6d-b99d-5714ef73486e.png">

    
    관계에 참여하는 각각의 엔터티가 관계를 맺는 다른 엔터티에 대해 하나 이상의 관계를 맺는 것이다. 하지만 반대 방향은 딱 하나의 관계만 가진다.
    
    예를 들어 한 고객은 여러 개의 계좌를 가질 수 있지만 계좌주는 반드시 한 명이다.
    
3. M:N 관계
    
<img width="411" alt="스크린샷 2022-01-24 오후 1 01 08" src="https://user-images.githubusercontent.com/81155572/150720025-f455d514-e2aa-461e-aaa6-f98986137f54.png">

    

두 개 엔터티가 서로 여래 개의 관계를 가지는 것이다.

관계형 DB에서 M:N 관계의 조인은 카테시안 곱이 발생한다. 그래서 두 개의 주식별자를 상속받은 관계 엔터티를 이용해 3개의 엔터티로 구분해 표현한다.(M:N 관계를 1:N, N:1로 해소한다.)

> 관계선택사양(필수참여관계와 선택참여관계)
> 

<img width="488" alt="스크린샷 2022-01-24 오후 1 01 32" src="https://user-images.githubusercontent.com/81155572/150720052-c1d01416-64ff-4ea2-b270-165bb9eab8c1.png">


| 구분 | 내용 |
| --- | --- |
| 필수참여관계 = 필수적 관계 | 반드시 하나는 있어야 하는 관계이며 ‘I’로 표현된다. |
| 선택참여관계 = 선택적 관계 | 없을 수도 있는 관계며 ‘O’로 표현한다. |

<img width="507" alt="스크린샷 2022-01-24 오후 1 01 42" src="https://user-images.githubusercontent.com/81155572/150720062-1b8edc8a-0589-43b2-934b-5c3650040aef.png">


“지하철 문이 반드시  닫혀야 지하철이 출발한다"는, 필수적 연결관계를 찾을 수 있다. 이를 데이터 모델의 관계에서는 필수참여관계(Mandatory)라고 한다. 필수참여관계는 모든 참여자가 타 엔터티의 참여자와 반드시 관계를 가진다. 예를 들어 주문서는 반드시 주문목록을 가지며 주문목록이 없는 주문서는 의미가 없으므로 주문서-주문목록은 필수참여관계이다.

반면 지하철 안내방송 시스템은 그렇지 않다. 지하철 내 안내 방송은 음식 시작 시점이 조금 달라져도, 고장으로 한 정거장에서 방송을 하지 못해도 지하철 운행에는 큰 영향을 주지 않는다. 이처럼 관련은 있지만 필수적이지 않은 관계를 데이터 모델에서는 선택참여관계(Optional)라고 한다. 목록은 주문이 될 수도 있고 주문이 되지 않는 목록이 있을 수도 있어서 목록-주문목록은 선택참여관계이다.
